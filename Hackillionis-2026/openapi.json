{"openapi":"3.1.0","info":{"title":"Payment Rules Engine","description":"Production-grade Payment Rules Engine API with async SQLAlchemy 2.0","version":"1.0.0"},"paths":{"/api/v1/users/":{"get":{"tags":["users"],"summary":"List Users","description":"List users with optional pagination.","operationId":"list_users_api_v1_users__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"},"title":"Response List Users Api V1 Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["users"],"summary":"Create User","description":"Create a new user.","operationId":"create_user_api_v1_users__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}":{"get":{"tags":["users"],"summary":"Get User","description":"Get user by ID.","operationId":"get_user_api_v1_users__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["users"],"summary":"Update User","description":"Partially update a user.","operationId":"update_user_api_v1_users__user_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["users"],"summary":"Delete User","description":"Delete a user and their transactions.","operationId":"delete_user_api_v1_users__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/rules":{"get":{"tags":["user-rules"],"summary":"Get User Rules","description":"Get rule config for a user. Returns 404 if user missing, null if config not set.","operationId":"get_user_rules_api_v1_users__user_id__rules_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/UserRuleConfigResponse"},{"type":"null"}],"title":"Response Get User Rules Api V1 Users  User Id  Rules Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["user-rules"],"summary":"Create Or Update User Rules","description":"Create or replace rule config for a user.","operationId":"create_or_update_user_rules_api_v1_users__user_id__rules_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRuleConfigCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRuleConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["user-rules"],"summary":"Update User Rules","description":"Partially update rule config for a user. Creates config if missing.","operationId":"update_user_rules_api_v1_users__user_id__rules_patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRuleConfigUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRuleConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rules/":{"get":{"tags":["rules"],"summary":"List Rules","description":"List rules with optional pagination and active filter.","operationId":"list_rules_api_v1_rules__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RuleResponse"},"title":"Response List Rules Api V1 Rules  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["rules"],"summary":"Create Rule","description":"Create a new payment rule.","operationId":"create_rule_api_v1_rules__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rules/{rule_id}":{"get":{"tags":["rules"],"summary":"Get Rule","description":"Get rule by ID.","operationId":"get_rule_api_v1_rules__rule_id__get","parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"integer","title":"Rule Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["rules"],"summary":"Update Rule","description":"Partially update a rule.","operationId":"update_rule_api_v1_rules__rule_id__patch","parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"integer","title":"Rule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["rules"],"summary":"Delete Rule","description":"Delete a rule.","operationId":"delete_rule_api_v1_rules__rule_id__delete","parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"integer","title":"Rule Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/transactions":{"get":{"tags":["transactions"],"summary":"List Transactions","description":"List transactions for a user.","operationId":"list_transactions_api_v1_users__user_id__transactions_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponse"},"title":"Response List Transactions Api V1 Users  User Id  Transactions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["transactions"],"summary":"Create Transaction","description":"Create a transaction for a user.","operationId":"create_transaction_api_v1_users__user_id__transactions_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/transactions/{transaction_id}":{"get":{"tags":["transactions"],"summary":"Get Transaction","description":"Get a transaction by ID for a user.","operationId":"get_transaction_api_v1_users__user_id__transactions__transaction_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["transactions"],"summary":"Update Transaction","description":"Partially update a transaction.","operationId":"update_transaction_api_v1_users__user_id__transactions__transaction_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["transactions"],"summary":"Delete Transaction","description":"Delete a transaction.","operationId":"delete_transaction_api_v1_users__user_id__transactions__transaction_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"transaction_id","in":"path","required":true,"schema":{"type":"integer","title":"Transaction Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/evaluate":{"post":{"tags":["evaluation"],"summary":"Evaluate Transaction","description":"Evaluate all registered payment rules for an existing transaction by ID.\n\nUses per-user RuleConfig from the database. Returns risk_score (0-100),\ndecision (ALLOW / REVIEW / BLOCK), and per-rule results.","operationId":"evaluate_transaction_api_v1_evaluate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluationByTransactionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/capital-one/customers":{"get":{"tags":["capital-one"],"summary":"Get Capital One Customers","description":"Fetch all customers from Capital One API.","operationId":"get_capital_one_customers_api_v1_capital_one_customers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CustomerSchema"},"type":"array","title":"Response Get Capital One Customers Api V1 Capital One Customers Get"}}}}}}},"/api/v1/capital-one/customers/{customer_id}/accounts":{"get":{"tags":["capital-one"],"summary":"Get Capital One Customer Accounts","description":"Fetch accounts for a specific customer from Capital One.","operationId":"get_capital_one_customer_accounts_api_v1_capital_one_customers__customer_id__accounts_get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AccountSchema"},"title":"Response Get Capital One Customer Accounts Api V1 Capital One Customers  Customer Id  Accounts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/capital-one/accounts/{account_id}/transactions":{"get":{"tags":["capital-one"],"summary":"Get Account Transactions With Evaluation","description":"Fetch transactions from Capital One, then evaluate each with our RuleEngine.\nRequires user_id (query) to create local transactions and run rules.","operationId":"get_account_transactions_with_evaluation_api_v1_capital_one_accounts__account_id__transactions_get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string","title":"Account Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionWithEvaluationSchema"},"title":"Response Get Account Transactions With Evaluation Api V1 Capital One Accounts  Account Id  Transactions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/capital-one/accounts/{account_id}/evaluate-purchase":{"post":{"tags":["capital-one"],"summary":"Evaluate Purchase","description":"Create a purchase in Capital One API, create transaction in our DB,\nrun rule engine evaluation. Returns Capital One response + evaluation.\nuser_id (query) links the local transaction and rule config.","operationId":"evaluate_purchase_api_v1_capital_one_accounts__account_id__evaluate_purchase_post","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string","title":"Account Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluatePurchaseRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluatePurchaseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","description":"Health check endpoint for load balancers and monitoring.","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Health Health Get"}}}}}}}},"components":{"schemas":{"AccountSchema":{"properties":{"_id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"nickname":{"type":"string","title":"Nickname"},"balance":{"type":"number","title":"Balance"}},"type":"object","required":["_id","type","nickname","balance"],"title":"AccountSchema","description":"Capital One account (Nessie API)."},"CapitalOneTransactionSchema":{"properties":{"_id":{"type":"string","title":"Id"},"amount":{"type":"number","title":"Amount"},"description":{"type":"string","title":"Description"},"payment_date":{"type":"string","title":"Payment Date"}},"type":"object","required":["_id","amount","description","payment_date"],"title":"CapitalOneTransactionSchema","description":"Single transaction from Capital One API."},"CustomerSchema":{"properties":{"_id":{"type":"string","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"type":"string","title":"Email"}},"type":"object","required":["_id","first_name","last_name","email"],"title":"CustomerSchema","description":"Capital One customer (Nessie API)."},"EvaluatePurchaseRequest":{"properties":{"amount":{"type":"number","exclusiveMinimum":0.0,"title":"Amount"},"description":{"type":"string","minLength":1,"title":"Description"},"country":{"type":"string","title":"Country","default":"US"}},"type":"object","required":["amount","description"],"title":"EvaluatePurchaseRequest","description":"Request body for evaluate-purchase endpoint."},"EvaluatePurchaseResponse":{"properties":{"capital_one_response":{"additionalProperties":true,"type":"object","title":"Capital One Response"},"evaluation":{"$ref":"#/components/schemas/EvaluationResponseSchema"}},"type":"object","required":["capital_one_response","evaluation"],"title":"EvaluatePurchaseResponse","description":"Response: Capital One purchase response + our evaluation."},"EvaluationByTransactionRequest":{"properties":{"transaction_id":{"type":"integer","exclusiveMinimum":0.0,"title":"Transaction Id","description":"ID of the transaction to evaluate"}},"type":"object","required":["transaction_id"],"title":"EvaluationByTransactionRequest","description":"Request to evaluate rules for an existing transaction by ID."},"EvaluationResponse":{"properties":{"transaction_id":{"type":"integer","title":"Transaction Id","description":"Evaluated transaction ID"},"risk_score":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Risk Score","description":"Total risk score (sum of triggered rule weights)"},"decision":{"type":"string","enum":["ALLOW","REVIEW","BLOCK"],"title":"Decision","description":"ALLOW if score < 40, REVIEW if 40-70, BLOCK if > 70"},"rule_results":{"items":{"$ref":"#/components/schemas/RuleResultSchema"},"type":"array","title":"Rule Results","description":"Per-rule evaluation results"}},"type":"object","required":["transaction_id","risk_score","decision"],"title":"EvaluationResponse","description":"Result of rule engine evaluation for a transaction."},"EvaluationResponseSchema":{"properties":{"transaction_id":{"type":"integer","title":"Transaction Id"},"risk_score":{"type":"integer","title":"Risk Score"},"decision":{"type":"string","title":"Decision"},"rule_results":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Rule Results"}},"type":"object","required":["transaction_id","risk_score","decision"],"title":"EvaluationResponseSchema","description":"Rule engine evaluation result for Capital One routes."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RuleCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Rule name"},"condition_expression":{"type":"string","title":"Condition Expression","description":"Expression to evaluate (e.g. amount > 1000)"},"action_type":{"type":"string","maxLength":100,"title":"Action Type","description":"Action when condition matches"},"priority":{"type":"integer","minimum":0.0,"title":"Priority","description":"Evaluation priority (higher first)","default":0},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the rule is active","default":true}},"type":"object","required":["name","condition_expression","action_type"],"title":"RuleCreate","description":"Schema for creating a rule."},"RuleResponse":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Rule name"},"condition_expression":{"type":"string","title":"Condition Expression","description":"Expression to evaluate (e.g. amount > 1000)"},"action_type":{"type":"string","maxLength":100,"title":"Action Type","description":"Action when condition matches"},"priority":{"type":"integer","minimum":0.0,"title":"Priority","description":"Evaluation priority (higher first)","default":0},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the rule is active","default":true},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","condition_expression","action_type","id","created_at"],"title":"RuleResponse","description":"Schema for rule response."},"RuleResultSchema":{"properties":{"rule_name":{"type":"string","title":"Rule Name","description":"Name of the rule that was evaluated"},"triggered":{"type":"boolean","title":"Triggered","description":"Whether the rule was triggered (violation)"},"message":{"type":"string","title":"Message","description":"Human-readable result message"},"risk_contribution":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Risk Contribution","description":"Risk contribution (rule weight) when triggered"}},"type":"object","required":["rule_name","triggered","message","risk_contribution"],"title":"RuleResultSchema","description":"Single rule evaluation result for API response."},"RuleUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"condition_expression":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Condition Expression"},"action_type":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Action Type"},"priority":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Priority"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"RuleUpdate","description":"Schema for partial rule update."},"TransactionCreate":{"properties":{"amount":{"type":"number","exclusiveMinimum":0.0,"title":"Amount","description":"Transaction amount"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency","default":"USD"},"country":{"anyOf":[{"type":"string","maxLength":3,"minLength":2},{"type":"null"}],"title":"Country"},"status":{"type":"string","maxLength":50,"title":"Status","default":"pending"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["amount"],"title":"TransactionCreate","description":"Schema for creating a transaction (user_id from path)."},"TransactionResponse":{"properties":{"amount":{"type":"number","exclusiveMinimum":0.0,"title":"Amount","description":"Transaction amount"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency","default":"USD"},"country":{"anyOf":[{"type":"string","maxLength":3,"minLength":2},{"type":"null"}],"title":"Country"},"status":{"type":"string","maxLength":50,"title":"Status","default":"pending"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["amount","id","user_id","created_at"],"title":"TransactionResponse","description":"Schema for transaction response."},"TransactionUpdate":{"properties":{"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Amount"},"currency":{"anyOf":[{"type":"string","maxLength":3,"minLength":3},{"type":"null"}],"title":"Currency"},"country":{"anyOf":[{"type":"string","maxLength":3,"minLength":2},{"type":"null"}],"title":"Country"},"status":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Status"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","title":"TransactionUpdate","description":"Schema for partial transaction update."},"TransactionWithEvaluationSchema":{"properties":{"transaction":{"$ref":"#/components/schemas/CapitalOneTransactionSchema"},"evaluation":{"$ref":"#/components/schemas/EvaluationResponseSchema"}},"type":"object","required":["transaction","evaluation"],"title":"TransactionWithEvaluationSchema","description":"Capital One transaction plus our RuleEngine evaluation result."},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"User full name"}},"type":"object","required":["email","name"],"title":"UserCreate","description":"Schema for creating a user."},"UserResponse":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"User full name"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["email","name","id","created_at"],"title":"UserResponse","description":"Schema for user response."},"UserRuleConfigCreate":{"properties":{"max_transaction_amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Max Transaction Amount"},"max_transactions_per_hour":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Max Transactions Per Hour"},"monthly_spending_limit":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Monthly Spending Limit"},"blocked_countries":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Blocked Countries"}},"type":"object","title":"UserRuleConfigCreate","description":"Schema for creating user rule config (user_id from path)."},"UserRuleConfigResponse":{"properties":{"max_transaction_amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Max Transaction Amount"},"max_transactions_per_hour":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Max Transactions Per Hour"},"monthly_spending_limit":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Monthly Spending Limit"},"blocked_countries":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Blocked Countries"},"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"}},"type":"object","required":["id","user_id"],"title":"UserRuleConfigResponse","description":"Schema for user rule config response."},"UserRuleConfigUpdate":{"properties":{"max_transaction_amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Max Transaction Amount"},"max_transactions_per_hour":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Max Transactions Per Hour"},"monthly_spending_limit":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Monthly Spending Limit"},"blocked_countries":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Blocked Countries"}},"type":"object","title":"UserRuleConfigUpdate","description":"Schema for partial update of user rule config."},"UserUpdate":{"properties":{"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email","description":"User email address"},"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"User full name"}},"type":"object","title":"UserUpdate","description":"Schema for partial user update."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}